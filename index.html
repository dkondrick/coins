<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Match Game</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        .coin-card, .name-card {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, opacity 0.4s;
            user-select: none;
            will-change: transform;
        }
        .coin-card:hover, .name-card:hover:not(.selected):not(.matched) {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .selected {
            border: 4px solid #f97316; /* Orange-500 */
            box-shadow: 0 0 0 6px rgba(249, 115, 22, 0.5);
            transform: scale(1.05);
        }
        .matched {
            opacity: 0.4;
            pointer-events: none;
            transform: none !important;
            border: 4px solid #10b981; /* Emerald-500 */
        }
        /* Specific CSS to ensure all images stay rounded */
        .coin-image {
            border-radius: 9999px; /* rounded-full */
        }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4 font-sans">

    <div id="game-container" class="w-full max-w-4xl bg-white rounded-xl shadow-2xl p-6 md:p-10 border-t-8 border-orange-500">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-2">ðŸ’° Coin Matcher ðŸ’°</h1>
            <p class="text-lg text-gray-600">Match the coin's value/image to its correct name.</p>
        </header>

        <!-- Score and Feedback -->
        <div class="flex flex-col sm:flex-row justify-between items-center mb-8 p-4 bg-orange-50 rounded-lg shadow-inner">
            <div class="text-xl font-semibold text-gray-700">
                Score: <span id="score-display" class="text-orange-600">0 / 4</span>
            </div>
            <div id="feedback-message" class="mt-2 sm:mt-0 text-center font-bold text-lg h-6">
                <!-- Messages will appear here -->
            </div>
            <button id="reset-button" class="mt-4 sm:mt-0 px-6 py-2 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition duration-150 shadow-md">
                Reset Game
            </button>
        </div>

        <div id="game-grid" class="flex flex-col lg:flex-row gap-8">

            <!-- Coin Cards (Image/Value Side) -->
            <div class="w-full lg:w-1/2 p-4 bg-gray-100 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-2">Coin Values (Click the Image)</h2>
                <div id="coin-cards" class="grid grid-cols-2 gap-4">
                    <!-- Coin cards will be generated here -->
                </div>
            </div>

            <!-- Name Cards (Target Side) -->
            <div class="w-full lg:w-1/2 p-4 bg-gray-100 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-2">Coin Names</h2>
                <div id="name-cards" class="grid grid-cols-2 gap-4">
                    <!-- Name cards will be generated here -->
                </div>
            </div>

        </div>

    </div>

    <script>
        // Data for US coins: id is the key for matching
        const COINS = [
            // UPDATE: Local image path and specific dimensions added.
            { id: 'penny', name: 'Penny', value: '1Â¢', imageUrl: './penny.png', width: 64, height: 64 },
            { id: 'nickel', name: 'Nickel', value: '5Â¢', imageUrl: './nickel.png', width: 80, height: 80 },
            { id: 'dime', name: 'Dime', value: '10Â¢', imageUrl: './dime.png', width: 56, height: 56 },
            { id: 'quarter', name: 'Quarter', value: '25Â¢', imageUrl: './quarter.png', width: 96, height: 96 }
        ];

        let selectedCoin = null;
        let selectedName = null;
        let matchedCount = 0;
        let isChecking = false;

        const coinCardsContainer = document.getElementById('coin-cards');
        const nameCardsContainer = document.getElementById('name-cards');
        const scoreDisplay = document.getElementById('score-display');
        const feedbackMessage = document.getElementById('feedback-message');
        const resetButton = document.getElementById('reset-button');

        // Helper function to shuffle an array
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        };

        // Renders the draggable coin cards (image/value side)
        const renderCoinCards = () => {
            // Shuffle the coin cards presentation order
            const coinOrder = [...COINS];
            shuffleArray(coinOrder);

            coinCardsContainer.innerHTML = coinOrder.map(coin => `
                <div data-id="${coin.id}" data-type="coin" class="coin-card bg-white p-4 rounded-lg shadow-md flex flex-col items-center justify-center h-48 border-4 border-transparent">
                    <!-- Coin Image Representation using local path and explicit size -->
                    <img 
                        src="${coin.imageUrl}" 
                        alt="${coin.name} coin with value ${coin.value}"
                        width="${coin.width}"
                        height="${coin.height}"
                        class="coin-image ring-4 ring-gray-200 mb-3"
                        onerror="this.onerror=null; this.src='https://placehold.co/96x96/f3f4f6/374151?text=Error'; this.style.borderRadius='8px';" 
                    />
                    <p class="text-2xl font-bold text-gray-800">${coin.value}</p>
                    <p class="text-sm text-gray-500 mt-1">(Click to select)</p>
                </div>
            `).join('');
        };

        // Renders the target name cards
        const renderNameCards = () => {
            // Shuffle the name cards presentation order
            const nameOrder = [...COINS];
            shuffleArray(nameOrder);

            nameCardsContainer.innerHTML = nameOrder.map(coin => `
                <div data-id="${coin.id}" data-type="name" class="name-card bg-white p-4 rounded-lg shadow-md flex items-center justify-center h-24 border-4 border-transparent">
                    <p class="text-3xl font-extrabold text-gray-800">${coin.name}</p>
                </div>
            `).join('');
        };

        // Handles selection and matching logic
        const handleCardClick = (event) => {
            if (isChecking) return;

            // Find the closest card element
            const card = event.target.closest('.coin-card, .name-card');
            if (!card || card.classList.contains('matched')) return;

            const id = card.getAttribute('data-id');
            const type = card.getAttribute('data-type');

            // Clear existing selection of the same type
            if (type === 'coin') {
                if (selectedCoin) selectedCoin.classList.remove('selected');
                selectedCoin = card;
            } else { // type === 'name'
                if (selectedName) selectedName.classList.remove('selected');
                selectedName = card;
            }

            // Apply selected class to the clicked card
            card.classList.add('selected');

            // Check for match if both are selected
            if (selectedCoin && selectedName) {
                isChecking = true;
                const coinId = selectedCoin.getAttribute('data-id');
                const nameId = selectedName.getAttribute('data-id');

                if (coinId === nameId) {
                    // Correct Match!
                    matchedCount++;
                    scoreDisplay.textContent = `${matchedCount} / 4`;
                    showMessage('Correct Match!', 'text-emerald-600');

                    // Mark as matched and clear selections
                    selectedCoin.classList.add('matched');
                    selectedName.classList.add('matched');
                    selectedCoin.classList.remove('selected');
                    selectedName.classList.remove('selected');

                    selectedCoin = null;
                    selectedName = null;

                    // Check for game completion
                    if (matchedCount === COINS.length) {
                        setTimeout(() => {
                            showMessage('Game Complete! Excellent work!', 'text-blue-600', true);
                        }, 500);
                    }
                } else {
                    // Incorrect Match!
                    showMessage('Incorrect! Try again.', 'text-red-600');

                    // Flash the incorrect cards and clear selection
                    selectedCoin.classList.add('border-red-500');
                    selectedName.classList.add('border-red-500');

                    setTimeout(() => {
                        selectedCoin.classList.remove('selected', 'border-red-500');
                        selectedName.classList.remove('selected', 'border-red-500');
                        selectedCoin = null;
                        selectedName = null;
                    }, 800);
                }

                // Reset checking state after a short delay
                setTimeout(() => {
                    isChecking = false;
                }, 900);
            }
        };

        // Displays temporary messages in the feedback area
        const showMessage = (message, colorClass, sticky = false) => {
            feedbackMessage.textContent = message;
            feedbackMessage.className = `mt-2 sm:mt-0 text-center font-bold text-lg h-6 ${colorClass}`;
            if (!sticky) {
                setTimeout(() => {
                    feedbackMessage.textContent = '';
                    feedbackMessage.className = 'mt-2 sm:mt-0 text-center font-bold text-lg h-6';
                }, 1500);
            }
        };

        // Initializes or resets the game state
        const initializeGame = () => {
            selectedCoin = null;
            selectedName = null;
            matchedCount = 0;
            isChecking = false;

            scoreDisplay.textContent = '0 / 4';
            feedbackMessage.textContent = '';
            
            renderCoinCards();
            renderNameCards();

            // Clear any previous listeners
            coinCardsContainer.removeEventListener('click', handleCardClick);
            nameCardsContainer.removeEventListener('click', handleCardClick);

            // Re-attach event listeners after rendering with a small delay
            // This prevents "phantom" clicks that might occur while the DOM is settling
            setTimeout(() => {
                coinCardsContainer.addEventListener('click', handleCardClick);
                nameCardsContainer.addEventListener('click', handleCardClick);
            }, 50);
        };

        // Setup event listener for the reset button
        resetButton.addEventListener('click', initializeGame);

        // Initialize the game when the window loads
        window.onload = initializeGame;

    </script>
</body>
</html>

